  # 要件定義書

  ## 1. システム概要

  ### 1-1. 概要説明
  飲食店向けのスタッフシフト管理システムです。

  本システムは以下の主な機能を提供します：
  - シフト作成・管理機能
  - スタッフの勤務時間管理機能
  - ログイン・アカウント管理機能
  - シフト希望の確認機能
  - シフト承認機能
  - 勤務状況確認機能

  ### 1-2. 目的
  本システムにより、
  - **シフト管理の効率化**: 管理者の業務負担を軽減
  - **法令遵守の徹底**: 労働時間の適切な管理と法令違反の防止
  - **データ分析の効率化**: 勤務データの一元管理と分析

  これらを実現する事を目的としています。

  ### 1-3. 背景
  現状、シフト管理は紙やExcelを用いた手動入力によって管理されています。

  現状の課題：
  - **入力ミスの発生**: 手動入力のため、シフト情報の誤記や記入漏れが起きる可能性が高い
  - **情報の検索性の低さ**: Excelでの情報検索に時間がかかり、スタッフ対応に支障をきたす場合がある
  - **複数人での運用が困難**: 同時編集が難しく、複数人での管理業務に対応しづらい
  - **データの一元管理が不十分**: 勤務履歴が十分に統合されておらず、長期的なデータ分析が難しい
  - **セキュリティの脆弱性**: Excelファイルはパスワード保護などの簡易的な対策しか行えず、データ漏洩リスクがある
  - **スタッフへの対応の非効率性**: リアルタイムでのシフト状況確認や希望提出システムがなく、スタッフに迅速な対応ができない

  ### 1-4. 想定利用者
  - 店長: 店舗全体のシフト作成・承認・スタッフ管理など、全権限を有する。
  - チーフ: 店長の補佐として一部の管理業務（シフト承認、勤務状況確認等）を行う。
  - リーダー: チームや時間帯単位の軽度な管理を行う（シフト確認、スタッフ情報の一部閲覧等）。
  - 一般スタッフ: スタッフ向けアプリケーションを通してシフトの確認や希望提出を行う。

  本システムは、店長、チーフ、リーダーのみが操作を行い、スタッフは別途のスタッフ向けアプリケーションを使用することを想定しています。

  ## 2. 業務要件

  ### 2-1. 業務要件一覧
  | No. | 業務内容                      | 説明                                 | 実施者                 |
  | :-- | :---------------------------- | :----------------------------------- | :--------------------- |
  | 1   | シフト作成                    | 月次シフトの作成                     | 店長、チーフ、リーダー |
  | 2   | シフト承認                    | スタッフのシフト希望の承認           | 店長、チーフ、リーダー |
  | 3   | シフト確認                    | シフト状況の確認                     | 店長、チーフ、リーダー |
  | 4   | シフト希望確認                | スタッフからのシフト希望の確認       | 店長、チーフ、リーダー |
  | 5   | 勤務状況確認                  | 勤務時間の確認、法令遵守状況の確認   | 店長、チーフ、リーダー |
  | 6   | アカウント作成                | システムへのアカウント登録           | 店長、チーフ、リーダー |
  | 7   | アカウントログイン/ログアウト | システムへのログイン/ログアウト      | 店長、チーフ、リーダー |
  | 8   | スタッフ管理                  | システムへのスタッフ情報の登録・編集 | 店長、チーフ、リーダー |
  | 9   | アカウント管理                | システムのアカウント情報の編集       | 店長、チーフ、リーダー |

  ### 2-2. 規模
  別途「労働時間管理設計書」、「シフト適正化設計書」を参照
  ### 2-3. 時期・時間
  別途「労働時間管理設計書」、「シフト適正化設計書」を参照
  ### 2-4. システム化の範囲

  #### システム化対象業務
  1. **シフト管理業務**  

    - 管理者がログイン後、シフトを作成・編集する処理
    - シフト状況の更新および履歴の記録

  2. **シフト承認業務**  

    - 管理者がログイン後、スタッフのシフト希望を承認する処理
    - シフト状況の更新および履歴を記録

  3. **シフト確認業務**  

    - 管理者が、シフト情報（日時、勤務時間など）を確認

  4. **勤務状況確認業務** 

    - 管理者が、現在の勤務状況を確認
    - 法令遵守状況の確認

  5. **アカウント管理業務**  

    - 管理者のアカウント作成、ログイン、ログアウトの管理
    - スタッフのアカウント管理

  6. **シフト希望確認業務**

    - 管理者がログイン後、スタッフからのシフト希望を確認する処理
    - シフト状況の更新および履歴の記録

  7. **スタッフデータのインポート**

    - 旧システムからのスタッフデータをインポートし登録する処理

  ### システム化対象外業務
  1. **スタッフへの直接連絡業務**  

    - シフト変更時の電話・メール連絡はシステムの対象外。手動対応

  2. **給与計算業務**  

    - 給与計算はシステムの対象外

  3. **移行データ作成**

    - 旧システムからの既存データ整形・移行データ作成は対象外

  4. **帳票印刷**

    - 帳票データの印刷等の出力はシステムの対象外

  5. **環境構築**

    - 動作環境の構築やサーバーの構築は対象外

  6. **スタッフアプリケーション**

    - スタッフ向けのアプリケーションは今回の実装の対象外
    - 設計上の考慮はするものとする

  ## 3. 機能要件
    - 各機能の詳細については、アプリケーション仕様書に記載。
  ### 3-1. 主要機能

  | No  | 区分機能名       | 説明                                        |
  | :-- | :--------------- | :------------------------------------------ |
  | 1   | シフト管理機能   | シフトの作成・編集・承認                    |
  | 2   | スタッフ管理機能 | スタッフ情報の登録・編集                    |
  | 3   | レポート機能     | 分析レポートの作成・閲覧機能                |
  | 4   | ログ機能         | システム・操作ログの参照                    |
  | 5   | 認証機能         | スタッフの権限管理・ログイン/ログアウト機能 |

  ### 3-2. 必要機能要件

  #### 3-2-1. 必要機能要件一覧
  | No  | 区分機能名   | 機能名               | 説明                                                              |
  | --- | ------------ | -------------------- | ------ |
  | 1   | シフト管理   | シフト作成           | 日次単位でのシフトを作成する                                     | 
  | 2   | シフト管理   | シフト編集           | 既存のシフト情報を修正・削除する                                 | 
  | 3   | シフト管理   | シフト承認           | 提出された希望シフトを確認・編集・承認する                       | 
  | 4   | シフト管理   | シフト一覧表示       | 月・週単位のシフトをリスト表示                                   | 
  | 5   | シフト管理   | シフト詳細表示       | 特定スタッフや日付のシフト内容を確認                             | 
  | 6   | 認証機能     | ログイン・ログアウト | スタッフの認証情報をもとにログイン・ログアウト処理をする         | 
  | 7   | 認証機能     | アクセス制限         | 適切な権限を持ったスタッフのみページにアクセスできるよう制御する | 
  | 8   | スタッフ管理 | スタッフ登録・編集   | スタッフ情報の登録と更新                                         | 
  | 9   | シフト管理   | 法令違反警告         | 違反がある場合に警告表示                                         | 

  ### 3-3. 希望機能要件

  #### 3-3-1. 希望機能要件一覧
  | No  | 区分機能名   | 機能名                   | 説明                                           | 
  | --- | ------------ | ------------------------ | ---------------------------------------------- |
  | 1   | シフト管理   | シフト自動作成           | 指定された条件でシフトを自動生成する           | 
  | 2   | スタッフ管理 | 複数店舗管理機能         | 複数店舗の管理に対応する                       | 
  | 3   | スタッフ管理 | 役職管理機能             | スタッフ情報に役職を追加し登録・編集・管理する | 
  | 4   | シフト管理   | 勤務担当管理機能         | シフトに勤務担当を設定し管理する               | 
  | 5   | ログ機能     | ログの記録機能           | システムの操作ログを記録し閲覧できる機能       | 
  | 6   | スタッフ管理 | スタッフデータインポート | 旧データからスタッフデータをCSVで登録する機能  | 

  ## 4. 非機能要件

  ### 4-1. 非機能要件一覧
  | No  | 項目             | 定義なし |
  | :-- | :--------------- | :------- |
  | 1   | 可用性           |          |
  | 2   | 性能・拡張性     |          |
  | 3   | 運用・保守性     |          |
  | 4   | 移行性           |          |
  | 5   | セキュリティ     |          |
  | 6   | 環境・エコロジー | ◯        |

  ### 4-2. 可用性
  メンテナンス時間(不定期)を除き、24時間365日稼働できるものとする。

  ### 4-3. 性能・拡張性
  | 項目                 | 内容                                                          |
  | :------------------- | :------------------------------------------------------------ |
  | シフト検索速度       | ユーザーが検索を実行した際、平均100ms以内に結果を表示すること |
  | 登録可能なスタッフ数 | 50~80名までのスタッフデータを登録可能であること               |
  | 登録可能な管理者数   | 最大5名までの管理者アカウントを登録可能であること             |
  | 勤務履歴の保存期間   | 勤務履歴を最長1年間保持可能であること                         |
  | 月間対応シフト作成数 | 平均4回/月のシフト作成に対応すること                          |
  | 利用可能時間         | メンテナンス時間(不定期)を除いて24時間365日稼働               |

  ### 4-4. 運用・保守性

  #### 運用
  - ログ機能
    - 勤務記録は最低1ヶ月保持し、古いデータは別のテーブルに移動しアーカイブ化する

  #### 保守性
  - MVCアーキテクチャを用いてコードの保守性を高めること
  - 適切な例外処理をし、エラーを特定できること

  ### 4-5. 移行性
  CSVファイルからの旧データ取り込み機能を提供する。スタッフ情報の一括登録に対応し、データのバリデーションとエラー処理を行う。ただし移行データの作成は対象外。

  ※ 詳細は「アプリケーション仕様書」を参照

  ### 4-6. セキュリティ
  ※ 詳細は「セキュリティ設計書」を参照

  ### 4-7. 環境・エコロジー
  環境・エコロジーについては、小規模システムの為定義しないものとする。

  ## 5. 成果物一覧
  本プロジェクトで作成する成果物は以下の通りとする。

  - 要件定義書（本ドキュメント）
  - テーブル定義書
  - DFD（データフローダイアグラム）
  - ユースケース図
  - 画面遷移図
  - 画面デザインモックアップ
  - ER図
  - 労働時間管理設計書
  - シフト適正化設計書
  - セキュリティ設計書
  - データベース作成スクリプトまたはダンプファイル
  - アプリケーション仕様書
  - アプリケーション操作手順書
  - ソリューションフォルダ(ソースコード一式)

  ## 6. 制約条件

  ### 6-1. 技術的制約
  以下の技術を使用して開発するものとする。

  - 使用言語: Java
  - フレームワーク: Spring
  - テンプレートエンジン: Thymeleaf
  - Webサーバー: Tomcat
  - データベース: MySQL
  - 開発環境: Eclipse IDE(Mavenビルド), Visual Studio Code
  - バージョン/コード管理: Git/Github
  - 認証/認可: Spring Security

  サーバーに関してはすべてオンプレミスでの構築とする。

  ### 6-2. スケジュール制約
  開発期間は 2024/6/8~2024/6/25完成を目標とする。

  #### 6-2-1. 主要なマイルストーン

  1. 要件定義完了： 2024年6月8日
  2. 基本設計完了： 2024年6月12日
  3. 管理者向けアプリケーション開発完了： 2024年6月21日

