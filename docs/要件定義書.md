# 要件定義書

## 1. システム概要

### 1.1 システム名
ShiftMan

### 1.2 システムの目的
本システムは、飲食店のスタッフのシフト管理を効率化し、労働時間や勤務日を適切に管理できるデスクトップアプリケーションを提供することを目的とする。

### 1.3 背景
- 現在はExcelを用いて手動管理しており、シフト変更の修正や共有が困難。
- 急な欠員発生時に代替スタッフを見つけるのが難しい。
- スタッフの労働時間が長時間になりがちで、法令遵守の観点からも管理が必要。

---

## 2. システム要件

### 2.1 機能要件

#### (1) 管理者向けアプリケーション
- **管理者ログイン機能**  
  - 管理者は適切な権限を持ち、認証を通じてログインする。
- **管理者ダッシュボード機能**  
  - シフト状況、労働時間、法令遵守の状態を可視化。
- **シフト作成機能**  
  - スタッフの希望を考慮し、適切なシフトを割り当てる。
- **勤務状況確認機能**  
  - 月単位で勤務状況や労働時間を確認し、適切な管理を行う。
- **通知機能**  
  - シフト変更や承認状況を管理者に通知する。
- **労働時間管理機能（法令遵守チェック）**  
  - 1日の労働時間が8時間、1週間の労働時間が40時間を超えないよう管理。
  - 休憩時間（6時間以上で45分、8時間以上で1時間）を適切に設定。

#### (2) スタッフ向けアプリケーション（実装対象外、要件に含む）
- **シフト登録・確認機能**  
  - スタッフがPCやスマホからシフトを登録・承認状況を確認できる。
- **シフト変更リクエスト機能**  
  - スタッフがシフト変更を申請し、承認を受ける。
- **勤務記録確認機能**  
  - 自身の勤務履歴や休暇申請状況を確認できる。

---

### 2.2 非機能要件
#### 可用性
  - アプリケーションは起動時常時利用可能であること
  - データベースサーバーはメンテナンス時間内を除いて利用可能であること
  - アプリケーションは安定して動作すること
  - 適切なエラーハンドリングを実装し、アプリが異常終了しないこと
#### 性能・拡張性
  - ユーザー数やシフトデータが増加しても処理速度が遅くならないこと
  - 拡張や修正が容易に行えるような設計・コードにすること
#### 運用・保守性
  - システムの設定やデータ管理を容易に行える管理画面を提供する。
  - シフトデータやユーザー情報は、管理者が簡単に追加・編集・削除できること。
  - ログ機能を実装し、エラー発生時に原因を特定しやすくする（例：アプリの動作ログ、データベースのエラーログ）。
  - 保守が容易に行えるような設計・コードにすること
#### 移行性
  - スクラッチ開発の為、定義しないものとする。
#### セキュリティ
  - ログイン機能により、認証ユーザー以外の個人情報へのアクセスを制限する。
  - 適切な権限管理を行い、不要なユーザーがデータベースに直接操作することをできないようにする。
  - 入力値のバリデーションを行い、SQLインジェクションやXSSなどの攻撃を防ぐ。
#### システム環境・エコロジー
  - 小規模システムのため、定義しないものとする。
---

## 3. データ要件

### 3.1 データベース設計
- 別途テーブル定義書に記載
---

## 4. 画面要件
- **ログイン画面**
  - ユーザー認証を行う。
- **ダッシュボード画面**
  - シフト状況、労働時間、アラート情報を表示。
- **シフト管理画面**
  - スタッフの希望を考慮したシフト割り当て。
- **通知設定画面**
  - シフト変更や法令遵守チェックの通知設定。

---

## 5. 提出物
すべてGithubリポジトリ上にアップロードする
| 項目                                       |     |
| ------------------------------------------ | --- |
| 要件定義書                                 |     |
| テーブル定義書                             |     |
| DFD                                        |     |
| ユースケース図                             |     |
| 画面遷移図                                 |     |
| アプリケーション仕様書                     |     |
| アプリケーション操作手順書                 |     |
| ソリューションフォルダ                     |     |
| データベース作成スクリプト、ダンプファイル |     |

---

# 要件定義書 

## 1. システム概要

### 1-1. 概要説明

本システムは、飲食店のスタッフの**シフト管理と勤怠記録の効率化**を目的としたデスクトップアプリケーションである。  
管理者がスタッフの希望シフトを確認し、適切なシフト割当や勤怠管理を行える機能を備える。

### 1-2. 目的

- **シフト作成の効率化**
- **スタッフの過労防止・法令遵守**
- **欠員時の迅速な対応**
- **管理者・スタッフの業務負担軽減**

### 1-3. 背景

現状はExcelで手動管理しており、以下の課題がある：

- シフト変更時の反映・共有が煩雑
- 急な欠員に対応しづらい
- 一部スタッフの働きすぎが発生
- 勤怠の集計や法令チェックが難しい

---

## 2. 想定利用者

- 管理者: シフトの管理業務や勤怠管理を行う担当者。本システムを利用
- スタッフ: スタッフ向けアプリケーションからシフトの登録や変更リクエスト、確認を行う利用者

---

## 3. 開発範囲

- **対象**：管理者向けwebアプリケーション（PCのみ）
- **非対象**：スタッフ向けアプリ（設計対象、実装不要）

---

## 4. 業務要件

| No. | 業務内容       | 説明                                       |
| --- | -------------- | ------------------------------------------ |
| 1   | スタッフ管理   | スタッフ情報の一覧表示・編集               |
| 2   | 希望シフト確認 | 提出された希望シフトの確認・承認           |
| 3   | シフト割当     | 各日ごとのスタッフ配置を割当               |
| 4   | 勤怠確認       | 月単位でスタッフの勤務状況（出退勤）を確認 |
| 5   | 法令チェック   | 労働時間・休憩時間が基準内かを自動チェック |
| 6   | レポート出力   | 勤務時間やシフト割当状況のレポート作成     |


---

## 5. システム化の範囲
### 5-1. システム化対象外業務
| 内容                   | 理由                          |
| ---------------------- | ----------------------------- |
| スタッフアプリの実装   | 開発範囲対象外                |
| 通知機能（プッシュ等） | 今回はアプリ内通知で実装      |
| 自動シフト最適化       | 今回は手動割当のみ対応        |
| 多店舗対応             | 今回の範囲では1店舗固定で運用 |

---

## 6. 機能要件

### 6-1. 必須機能要件

| No. | 機能名           | 説明                                     |
| --- | ---------------- | ---------------------------------------- |
| 1   | ログイン機能     | 管理者認証（パスワードハッシュ化）       |
| 2   | スタッフ一覧     | スタッフの登録・編集                     |
| 3   | 希望シフト確認   | 希望シフトの確認と承認状態の管理         |
| 4   | シフト作成・割当 | 管理画面でのシフトスケジュール作成(手動) |
| 5   | 勤怠確認         | 出退勤情報の表示（編集は行わない）       |

### 6-2. 希望機能要件

| No. | 機能名           | 説明                              |
| --- | ---------------- | --------------------------------- |
| 1   | 法令チェック     | 月/週単位の労働時間制限の自動判定 |
| 2   | 勤務時間レポート | スタッフ別の勤務時間合計を表示    |
| 3   | 休憩時間設定機能 | 法令に沿った休憩時間の設定機能    |
---

## 7. 非機能要件
### 7-1. 可用性
- 営業時間中はダウンタイム無く利用できるものとする
- DBサーバーはメンテナンス時間を除く(不定期)年中無休で稼働するものとする。

---

### 7-2. 拡張性
- 将来的な機能追加に容易に対応できる構造にする  
  （例：通知機能、スマホ連携、多店舗対応など）

---

### 7-3. 保守性
- MVCアーキテクチャを採用し、デバッグ、エラー特定などが行いやすい、保守性の高いコードにする。

---

### 7-4. 移行性
- スクラッチ開発のため、定義しないものとする
- 既存データからのインポートは定義範囲外

---

### 7-5. セキュリティ
- アカウントパスワードはハッシュ化して保存
- SpringSecurityで制御し、構文は作成時点で最新のものを使用する
- 適切なバリデーションにより、SQLインジェクション対策をする
- 
- Thymeleafのエスケープ処理により、XSS対策をする

## 8. データ要件

*別資料 テーブル定義書を参照* 

## 8. 制約条件

### 8-1. 技術的制約
| 区分     | 内容        |
| -------- | ----------- |
| OS       | Windows     |
| 実行形式 | jar         |
| DB       | MySQL       |
| 開発言語 | Java/Spring |

---

## 9. 提出物
すべてGithubリポジトリ上にアップロードする
| 項目                                       |     |
| ------------------------------------------ | --- |
| 要件定義書                                 |     |
| テーブル定義書                             |     |
| DFD                                        |     |
| ユースケース図                             |     |
| 画面遷移図                                 |     |
| アプリケーション仕様書                     |     |
| アプリケーション操作手順書                 |     |
| ソリューションフォルダ                     |     |
| データベース作成スクリプト、ダンプファイル |     |

---

## 10. 今後の拡張可能性（スコープ外提案）

- スマホアプリとの連携（シフト提出や打刻）
- シフト自動最適化（AIや条件ベース）
- 複数店舗への対応
- 労働基準法の改正対応（パラメータ化）

